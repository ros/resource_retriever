# prevent multiple inclusion
if(_@PROJECT_NAME@_CONFIG_INCLUDED)
  return()
endif()
set(_@PROJECT_NAME@_CONFIG_INCLUDED TRUE)

# output package information
if(NOT @PROJECT_NAME@_FIND_QUIETLY)
  message(STATUS "Found @PROJECT_NAME@: @PACKAGE_VERSION@ (${@PROJECT_NAME@_DIR})")
endif()

# Look for system curl first.
find_package(CURL QUIET)

if(NOT CURL_FOUND)
  # In this case, the vendor package should have built and installed a local copy.
  include(FindPkgConfig)
  if(NOT PKG_CONFIG_FOUND)
    message(FATAL_ERROR "Could not find pkg-config")
  endif()
  # Put the local copy's pkgconfig dir on the PKG_CONFIG_PATH.
  set(ENV{PKG_CONFIG_PATH}
    "$ENV{PKG_CONFIG_PATH}:${@PROJECT_NAME@_DIR}/../../../opt/libcurl_vendor/lib/pkgconfig")
  pkg_search_module(CURL REQUIRED libcurl)
endif()

# message(STATUS "CURL_FOUND: ${CURL_FOUND}")
# message(STATUS "CURL_LIBRARIES: ${CURL_LIBRARIES}")
# message(STATUS "CURL_LIBRARY_DIRS: ${CURL_LIBRARY_DIRS}")
# message(STATUS "CURL_INCLUDE_DIRS: ${CURL_INCLUDE_DIRS}")

set(libcurl_vendor_LIBRARIES)
foreach(library IN LISTS CURL_LIBRARIES)
  message(STATUS "library: ${library}")
  if(IS_ABSOLUTE "${library}")
    list(APPEND libcurl_vendor_LIBRARIES "${library}")
  else()
    find_library(library_abs ${library} PATHS "${CURL_LIBRARY_DIRS}" NO_DEFAULT_PATH)
    list(APPEND libcurl_vendor_LIBRARIES "${library_abs}")
  endif()
endforeach()
set(libcurl_vendor_LIBRARY_DIRS ${CURL_LIBRARY_DIRS})
set(libcurl_vendor_INCLUDE_DIRS ${CURL_INCLUDE_DIRS})

# message(STATUS "libcurl_vendor_LIBRARIES: ${libcurl_vendor_LIBRARIES}")
# message(STATUS "libcurl_vendor_LIBRARY_DIRS: ${libcurl_vendor_LIBRARY_DIRS}")
# message(STATUS "libcurl_vendor_INCLUDE_DIRS: ${libcurl_vendor_INCLUDE_DIRS}")
